{% extends "base.html" %}
{% load static %}
{% block title %} Home {% endblock %}

{% block content %}

<div class="container mx-auto px-4 py-8 space-y-16">

    <!-- HERO SECTION -->
    <section class="bg-gradient-to-r from-blue-600 to-purple-700 rounded-2xl p-6 md:p-8 text-white">
        <div class="max-w-2xl">
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">Discover Amazing Experiences</h1>
            <p class="text-lg md:text-xl mb-6 md:mb-8">Find the best events, movies, concerts and more in your city</p>
            <div class="flex flex-col sm:flex-row gap-3 md:gap-4">
                <input type="text" placeholder="Search for events, movies, concerts..."
                    class="px-4 py-3 rounded-lg text-gray-800 flex-grow focus:outline-none focus:ring-2 focus:ring-yellow-400">
                <button
                    class="bg-yellow-400 text-gray-900 px-6 py-3 rounded-lg font-semibold hover:bg-yellow-300 transition active:scale-95">
                    Search
                </button>
            </div>
        </div>
    </section>

    <!-- EVENTS SECTION -->
    <section>
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h2 class="text-2xl md:text-3xl font-bold">üé´ Business Events</h2>
                <p class="text-gray-600 dark:text-gray-300 mt-2">Don't miss out on these exciting events</p>
            </div>
            <a href="{% url 'events' %}" class="text-blue-600 hover:underline font-medium flex items-center self-end sm:self-auto">
                View All <span class="ml-1">‚Üí</span>
            </a>
        </div>

        <div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
            {% for event in events %}
            <a href="{% url 'event_view' event.id %}" class="block">
                <div
                    class="group bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 transform hover:-translate-y-1 active:translate-y-0">
                    <!-- Event Header with Gradient -->
                    <div class="h-28 md:h-32 bg-gradient-to-r from-blue-400 to-purple-500 relative overflow-hidden">
                        {% if event.image %}
                        <img src="{{ event.image.url }}" alt="{{ event.title }}"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        {% else %}
                        <div class="w-full h-full flex items-center justify-center">
                            <span class="text-white font-bold text-lg">üé≠</span>
                        </div>
                        {% endif %}
                        
                        <span class="absolute top-2 left-2 bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ event.event_type|default:"Event" }}
                        </span>
                        <span
                            class="absolute top-2 right-2 bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ event.date|date:"M d"|default:"Soon" }}
                        </span>
                        <!-- Rating Badge -->
                        <div
                            class="absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full flex items-center">
                            ‚≠ê {{ event.rating|default:"4.5" }}/5
                        </div>
                    </div>

                    <div class="p-3 md:p-4">
                        <h3 class="font-bold text-base md:text-lg mb-2 line-clamp-1">{{ event.name|default:"Event Name" }}</h3>

                        <!-- Event Details -->
                        <div class="space-y-1 md:space-y-2 mb-2 md:mb-3">
                            <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                                <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <span class="truncate">{{ event.location|default:"Venue Location" }}</span>
                            </div>
                            <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                                <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                {{ event.time|default:"7:00 PM" }} ‚Ä¢ {{ event.duration|default:"3h" }}
                            </div>
                        </div>

                        <!-- Price and Action -->
                        <div class="flex justify-between items-center pt-2 md:pt-3 border-t border-gray-200 dark:border-gray-600">
                            <div>
                                <span class="text-lg md:text-xl font-bold text-green-600 dark:text-green-400">
                                    ‚Çπ {% firstof event.ticket_price event.price "399" %}
                                </span>
                                <span class="text-xs text-gray-500 dark:text-gray-400 block">per person</span>
                            </div>
                            <button
                                class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-xs md:text-sm font-medium transition transform hover:scale-105 active:scale-95">
                                Book Now
                            </button>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
            
            {% if not events %}
            <div class="col-span-full text-center py-8">
                <p class="text-gray-500 dark:text-gray-400">No events available at the moment.</p>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- MOVIES SECTION -->
    <section>
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h2 class="text-2xl md:text-3xl font-bold">üé¨ Now Showing</h2>
                <p class="text-gray-600 dark:text-gray-300 mt-2">Latest blockbusters in theaters near you</p>
            </div>
    
            <a href="{% url 'movies' %}"
                class="text-blue-600 hover:underline font-medium flex items-center self-end sm:self-auto">
                View All <span class="ml-1">‚Üí</span>
            </a>
        </div>
    
        <div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
            {% for movie in movies %}
            <div
                class="group bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 transform hover:-translate-y-1 active:translate-y-0">
    
                <!-- üî• Clickable movie header only -->
                <a href="{% url 'movie_view' movie.id %}">
                    <div class="h-32 md:h-40 relative overflow-hidden">
    
                        {% if movie.image %}
                        <img src="{{ movie.image.url }}" alt="{{ movie.title }}"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        {% else %}
                        <div
                            class="w-full h-full bg-gradient-to-r from-red-400 to-pink-500 flex items-center justify-center">
                            <span class="text-white font-bold text-lg">üé¨</span>
                        </div>
                        {% endif %}
    
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
    
                        <span class="absolute top-2 left-2 bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ movie.language|default:"ENG" }}
                        </span>
    
                        <span
                            class="absolute top-2 right-2 bg-yellow-400 text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ movie.genre|default:"Action" }}
                        </span>
    
                        <div
                            class="absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full flex items-center">
                            ‚≠ê {{ movie.rating|default:"8.2" }}/10
                        </div>
    
                        <div
                            class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full">
                            {{ movie.duration|default:"2h 30m" }}
                        </div>
                    </div>
                </a>
    
                <!-- Movie Content -->
                <div class="p-3 md:p-4">
                    <h3 class="font-bold text-base md:text-lg mb-2 line-clamp-1">{{ movie.title }}</h3>
    
                    <div class="space-y-1 md:space-y-2 mb-2 md:mb-3">
                        <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-red-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            {{ movie.location }}
                        </div>
    
                        <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-red-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            {{ movie.date }} ‚Ä¢ {{ movie.time }}
                        </div>
                    </div>
    
                    <div class="flex justify-between items-center mb-2 text-xs md:text-sm">
                        <span class="text-gray-600 dark:text-gray-300">Seats:</span>
                        <span
                            class="font-semibold {% if movie.available_seats < 20 %}text-red-600{% else %}text-green-600{% endif %}">
                            {{ movie.available_seats }} left
                        </span>
                    </div>
    
                    <div
                        class="flex justify-between items-center pt-2 md:pt-3 border-t border-gray-200 dark:border-gray-600">
                        <div>
                            <span class="text-lg md:text-xl font-bold text-green-600 dark:text-green-400">
                                ‚Çπ {% firstof movie.ticket_price movie.price "199" %}
                            </span>
                            <span class="text-xs text-gray-500 dark:text-gray-400 block">per ticket</span>
                        </div>
    
                        <!-- üî• Correct "Book Tickets" button -->
                        <a href="{% url 'book_movie_tickets' movie.id %}"
                            class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-xs md:text-sm font-medium transition transform hover:scale-105 active:scale-95 text-center">
                            Book Tickets
                        </a>
                    </div>
                </div>
            </div>
    
            {% endfor %}
    
            {% if not movies %}
            <div class="col-span-full text-center py-8">
                <p class="text-gray-500 dark:text-gray-400">No movies available at the moment.</p>
            </div>
            {% endif %}
        </div>
    </section>


    <!-- COMEDY SHOWS SECTION -->
    <section>
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h2 class="text-2xl md:text-3xl font-bold">üé§ Comedy Shows</h2>
                <p class="text-gray-600 dark:text-gray-300 mt-2">Laugh out loud with top comedians</p>
            </div>
            <a href="{% url 'comedyshows' %}" class="text-blue-600 hover:underline font-medium flex items-center self-end sm:self-auto">
                View All <span class="ml-1">‚Üí</span>
            </a>
        </div>

        <div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
            {% for comedy in comedyshows %}
            <a href="{% url 'comedyshows_view' comedy.id %}" class="block">
                <div
                    class="group bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 transform hover:-translate-y-1 active:translate-y-0">
                    <!-- Comedy Show Header -->
                    <div class="h-28 md:h-32 bg-gradient-to-r from-yellow-400 to-orange-500 relative overflow-hidden">
                        {% if comedy.image %}
                        <img src="{{ comedy.image.url }}" alt="{{ comedy.title }}"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        {% else %}
                        <div class="w-full h-full flex items-center justify-center">
                            <span class="text-white font-bold text-lg">üòÇ</span>
                        </div>
                        {% endif %}
                        <span class="absolute top-2 left-2 bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ comedy.comedy_type|default:"Stand-up" }}
                        </span>
                        <span class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                            {{ comedy.age_limit|default:"18" }}+
                        </span>
                        <!-- Comedian -->
                        <div
                            class="absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full">
                            üé§ {{ comedy.comedian_name|default:"Comedian" }}
                        </div>
                        <!-- Duration -->
                        <div
                            class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full">
                            {{ comedy.duration|default:"90min" }}
                        </div>
                    </div>

                    <div class="p-3 md:p-4">
                        <h3 class="font-bold text-base md:text-lg mb-2 line-clamp-1">{{ comedy.title|default:"Comedy Show" }}</h3>

                        <!-- Comedy Details -->
                        <div class="space-y-1 md:space-y-2 mb-2 md:mb-3">
                            <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                                <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-yellow-500 flex-shrink-0" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <span class="truncate">{{ comedy.location|default:"Comedy Club" }}</span>
                            </div>
                            <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                                <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-yellow-500 flex-shrink-0" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                {{ comedy.date|default:"Today" }} ‚Ä¢ {{ comedy.time|default:"8:00 PM" }}
                            </div>
                        </div>

                        <!-- Rating -->
                        <div class="flex items-center justify-between mb-2 md:mb-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-xs md:text-sm">
                            <div class="flex items-center">
                                <div class="flex text-yellow-400" id="rating-stars-{{ forloop.counter }}">
                                    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                                </div>
                                <span class="ml-1 text-gray-600 dark:text-gray-300">
                                    {{ comedy.rating|default:"4.5" }}/5
                                </span>
                            </div>
                            <span class="font-semibold text-yellow-600 dark:text-yellow-400">
                                {{ comedy.popularity|default:"Popular" }}
                            </span>
                        </div>

                        <div class="flex justify-between items-center pt-2 md:pt-3 border-t border-gray-200 dark:border-gray-600">
                            <div>
                                <span class="text-lg md:text-xl font-bold text-green-600 dark:text-green-400">
                                    ‚Çπ {% firstof comedy.ticket_price comedy.price "499" %}
                                </span>
                                <span class="text-xs text-gray-500 dark:text-gray-400 block">per ticket</span>
                            </div>
                            <a href="{% url 'book_comedy_tickets' comedy.id %}"
                                class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-xs md:text-sm font-medium transition transform hover:scale-105 active:scale-95">
                                Get Tickets
                            </a>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
            
            {% if not comedyshows %}
            <div class="col-span-full text-center py-8">
                <p class="text-gray-500 dark:text-gray-400">No comedy shows available at the moment.</p>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- LIVE CONCERTS SECTION -->
    <section>
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h2 class="text-2xl md:text-3xl font-bold">üé∏ Live Concerts</h2>
                <p class="text-gray-600 dark:text-gray-300 mt-2">Experience music like never before</p>
            </div>
            <a href="{% url 'liveconcerts' %}"
                class="text-blue-600 hover:underline font-medium flex items-center self-end sm:self-auto">
                View All <span class="ml-1">‚Üí</span>
            </a>
        </div>
    
        <div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
            {% for concert in liveconcerts %}
            <div
                class="group bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 transform hover:-translate-y-1 active:translate-y-0">
                <a href="{% url 'liveconcerts_view' concert.id %}" class="block">
                    <!-- Concert Header -->
                    <div class="h-28 md:h-32 bg-gradient-to-r from-purple-500 to-pink-600 relative overflow-hidden">
                        {% if concert.image %}
                        <img src="{{ concert.image.url }}" alt="{{ concert.title }}"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        {% else %}
                        <div class="w-full h-full flex items-center justify-center">
                            <span class="text-white font-bold text-lg">üéµ</span>
                        </div>
                        {% endif %}
                        <span class="absolute top-2 left-2 bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ concert.music_genre|default:"Rock" }}
                        </span>
                        <span
                            class="absolute top-2 right-2 bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                            {{ concert.date|date:"M d"|default:"Soon" }}
                        </span>
                        <!-- Artist -->
                        <div
                            class="absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full">
                            üé§ {{ concert.artist_name|default:"Artist" }}
                        </div>
                    </div>
                </a>
    
                <div class="p-3 md:p-4">
                    <a href="{% url 'liveconcerts_view' concert.id %}" class="block">
                        <h3
                            class="font-bold text-base md:text-lg mb-2 line-clamp-1 hover:text-purple-600 transition-colors">
                            {{ concert.title|default:"Concert" }}
                        </h3>
                    </a>
    
                    <!-- Concert Details -->
                    <div class="space-y-1 md:space-y-2 mb-3">
                        <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-purple-500 flex-shrink-0" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            <span class="truncate">{{ concert.location|default:"Venue" }}</span>
                        </div>
                        <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-2 text-purple-500 flex-shrink-0" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            {{ concert.time|default:"7:00 PM" }} ‚Ä¢ 3h
                        </div>
                    </div>
    
                    <!-- Additional Info -->
                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-4">
                        <div class="text-center flex-1">
                            <div class="font-semibold text-gray-700 dark:text-gray-300">Age</div>
                            <div>18+</div>
                        </div>
                        <div class="text-center flex-1 border-l border-r border-gray-200 dark:border-gray-600">
                            <div class="font-semibold text-gray-700 dark:text-gray-300">Type</div>
                            <div>Live</div>
                        </div>
                        <div class="text-center flex-1">
                            <div class="font-semibold text-gray-700 dark:text-gray-300">Seats</div>
                            <div
                                class="{% if concert.available_seats and concert.available_seats < 50 %}text-red-600{% else %}text-green-600{% endif %}">
                                {% if concert.available_seats %}{{ concert.available_seats }}{% else %}Many{% endif %}
                            </div>
                        </div>
                    </div>
    
                    <!-- Price and Book Now Section - FIXED -->
                    <div class="flex justify-between items-center pt-3 border-t border-gray-200 dark:border-gray-600">
                        <div class="flex flex-col">
                            <span class="text-lg md:text-xl font-bold text-green-600 dark:text-green-400">
                                ‚Çπ{{ concert.normal_ticket_price|default:"799" }}
                            </span>
                            <span class="text-xs text-gray-500 dark:text-gray-400 mt-[-2px]">starting from</span>
                        </div>
                        <a href="{% url 'liveconcerts_book_ticket' concert.id %}"
                            class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg">
                            Book Now
                        </a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-span-full text-center py-12">
                <div class="text-gray-400 text-6xl mb-4">üéµ</div>
                <p class="text-gray-500 dark:text-gray-400 text-lg">No concerts available at the moment.</p>
                <p class="text-gray-400 dark:text-gray-500 text-sm mt-2">Check back later for exciting live events!</p>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- AMUSEMENT PARKS SECTION -->
    <section class="py-6">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h2 class="text-2xl md:text-3xl font-bold">üé¢ Amusement Parks</h2>
                <p class="text-gray-600 dark:text-gray-300 mt-2">Fun for the whole family</p>
            </div>
            <a href="{% url 'amusements' %}"
                class="text-blue-600 hover:underline font-medium flex items-center self-end sm:self-auto">
                View All <span class="ml-1">‚Üí</span>
            </a>
        </div>
    
        <div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
            {% for park in amusements %}
            <div
                class="group bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 transform hover:-translate-y-1 active:translate-y-0 h-full flex flex-col">
                <!-- Image Section - Fixed Height -->
                <a href="{% url 'amusements_view' park.id %}" class="block flex-shrink-0">
                    <div class="h-32 md:h-36 relative overflow-hidden">
                        {% if park.image %}
                        <img src="{{ park.image.url }}" alt="{{ park.park_name }}"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        {% else %}
                        <div
                            class="w-full h-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center">
                            <span class="text-white font-bold text-lg">üé°</span>
                        </div>
                        {% endif %}
    
                        <!-- Dark Overlay -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
    
                        <!-- Top Badges -->
                        <div class="absolute top-2 left-2 right-2 flex justify-between">
                            <span class="bg-white text-gray-800 text-xs font-bold px-2 py-1 rounded-full">
                                {{ park.rides_available }}+ Rides
                            </span>
                            {% if park.family_friendly %}
                            <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                                Family
                            </span>
                            {% endif %}
                        </div>
    
                        <!-- Bottom Badges -->
                        <div class="absolute bottom-2 left-2 right-2 flex justify-between">
                            <span class="bg-black/70 text-white text-xs px-2 py-1 rounded-full flex items-center">
                                ‚≠ê 4.3/5
                            </span>
                            <span class="bg-black/70 text-white text-xs px-2 py-1 rounded-full">
                                üé¢ {{ park.rides_available }}+
                            </span>
                        </div>
                    </div>
                </a>
    
                <!-- Content Section - Flexible -->
                <div class="p-3 md:p-4 flex flex-col flex-1">
                    <!-- Park Name -->
                    <a href="{% url 'amusements_view' park.id %}" class="block mb-2">
                        <h3 class="font-bold text-base md:text-lg line-clamp-1 hover:text-blue-600 transition-colors">{{ park.park_name }}</h3>
                    </a>
    
                    <!-- Location & Time -->
                    <div class="space-y-1 md:space-y-2 mb-2 md:mb-3 flex-1">
                        <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-green-500 flex-shrink-0" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            <span class="truncate">{{ park.location }}</span>
                        </div>
                        <div class="flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-300">
                            <svg class="w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2 text-green-500 flex-shrink-0" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            {{ park.time|time:"g:i A"|default:"10:00 AM" }} ‚Ä¢ Full Day
                        </div>
                    </div>
    
                    <!-- Features Tags -->
                    <div class="flex flex-wrap gap-1 mb-3 md:mb-4">
                        <span
                            class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs px-2 py-1 rounded">üé¢
                            Rides</span>
                        <span
                            class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded">üçî
                            Food</span>
                        <span
                            class="bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs px-2 py-1 rounded">üé™
                            Shows</span>
                        {% if park.family_friendly %}
                        <span
                            class="bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs px-2 py-1 rounded">üë®‚Äçüë©‚Äçüëß‚Äçüë¶
                            Family</span>
                        {% endif %}
                    </div>
    
                    <!-- Price & Button - Fixed at bottom -->
                    <div
                        class="flex justify-between items-center pt-3 border-t border-gray-200 dark:border-gray-600 mt-auto">
                        <div>
                            <div class="text-lg md:text-xl font-bold text-green-600 dark:text-green-400 leading-tight">
                                ‚Çπ{{ park.ticket_price }}
                            </div>
                            <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">per person</div>
                        </div>
                        <a href="{% url 'amusements_book_tickets' park.id %}"
                            class="bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-xs md:text-sm font-medium transition-colors duration-300">
                            Buy Tickets
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
    
            {% if not amusements %}
            <div class="col-span-full text-center py-8">
                <p class="text-gray-500 dark:text-gray-400">No amusement parks available at the moment.</p>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- NEWSLETTER SECTION -->
    <section class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl md:rounded-2xl p-6 md:p-8 text-white text-center">
        <h2 class="text-2xl md:text-3xl font-bold mb-4">Stay Updated</h2>
        <p class="mb-6 max-w-md mx-auto text-sm md:text-base">Get the latest updates on events, concerts, and special offers directly to your
            inbox</p>
        <div class="flex flex-col sm:flex-row gap-3 md:gap-4 max-w-md mx-auto">
            <input type="email" placeholder="Your email address" class="px-4 py-3 rounded-lg text-gray-800 flex-grow focus:outline-none focus:ring-2 focus:ring-yellow-400">
            <button
                class="bg-yellow-400 text-gray-900 px-6 py-3 rounded-lg font-semibold hover:bg-yellow-300 transition active:scale-95">
                Subscribe
            </button>
        </div>
    </section>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // This will run after the page loads
        const comedyCards = document.querySelectorAll('[id^="rating-stars-"]');
        
        comedyCards.forEach((starsContainer, index) => {
            // For demonstration, using a random rating
            // In your actual implementation, you'd get this from your data
            const rating = Math.random() * 5; // Random rating for demo
            
            if (rating < 4.5) {
                if (rating >= 3.5) {
                    starsContainer.innerHTML = '‚≠ê‚≠ê‚≠ê‚≠ê<span class="text-gray-300">‚≠ê</span>';
                } else if (rating >= 2.5) {
                    starsContainer.innerHTML = '‚≠ê‚≠ê‚≠ê<span class="text-gray-300">‚≠ê‚≠ê</span>';
                } else if (rating >= 1.5) {
                    starsContainer.innerHTML = '‚≠ê‚≠ê<span class="text-gray-300">‚≠ê‚≠ê‚≠ê</span>';
                } else if (rating >= 0.5) {
                    starsContainer.innerHTML = '‚≠ê<span class="text-gray-300">‚≠ê‚≠ê‚≠ê‚≠ê</span>';
                } else {
                    starsContainer.innerHTML = '<span class="text-gray-300">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>';
                }
            }
        });
    });
</script>
{% endblock %}