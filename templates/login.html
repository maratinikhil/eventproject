{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% block content %}

<!-- CSS for animations -->
<style>
    /* Background animation styles */
    .gif-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        object-fit: cover;
        opacity: 0.4;
    }

    .particles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
    }

    .gradient-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        z-index: -2;
    }

    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    /* Floating animation */
    @keyframes float {

        0%,
        100% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    .floating {
        animation: float 3s ease-in-out infinite;
    }

    /* Pulse animation */
    @keyframes pulse {

        0%,
        100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.05);
        }
    }

    .pulse {
        animation: pulse 2s ease-in-out infinite;
    }

    /* Form container animation */
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animated-form {
        animation: slideIn 0.6s ease-out forwards;
    }

    /* Glow effect */
    .glow {
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        transition: box-shadow 0.3s ease;
    }

    .glow:hover {
        box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
    }

    /* Custom checkbox animation */
    .checkmark {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: block;
        stroke-width: 2;
        stroke: #fff;
        stroke-miterlimit: 10;
        animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {

        .gif-background,
        .particles-container {
            display: none;
        }

        .gradient-background {
            opacity: 0.7;
        }
    }
</style>

<!-- Choose ONE background option below by uncommenting it -->

<!-- OPTION 1: Animated Gradient Background (Recommended - No external dependencies) -->
<div class="gradient-background"></div>

<!-- OPTION 2: GIF Background (Uncomment to use) -->
<!--
<div class="gif-background-container">
    <img src="https://media.giphy.com/media/3o7abldj0b3rxrZUxW/giphy.gif" alt="Animated background" class="gif-background">
    <div class="absolute inset-0 bg-black opacity-40"></div>
</div>
-->

<!-- OPTION 3: Geometric Pattern GIF -->
<!--
<div class="gif-background-container">
    <img src="https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif" alt="Geometric pattern" class="gif-background">
    <div class="absolute inset-0 bg-black opacity-30"></div>
</div>
-->

<!-- OPTION 4: Particle Animation using Canvas -->
<canvas id="particles-canvas" class="particles-container"></canvas>

<div class="min-h-screen flex justify-center items-center py-8 px-4 relative">
    <!-- Decorative floating elements -->
    <div
        class="absolute top-10 left-10 w-24 h-24 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 floating">
    </div>
    <div class="absolute bottom-10 right-10 w-32 h-32 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 floating"
        style="animation-delay: -1.5s;"></div>
    <div class="absolute top-1/2 left-1/4 w-16 h-16 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 floating"
        style="animation-delay: -0.5s;"></div>

    <div class="w-full max-w-md animated-form">
        <div
            class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-2xl shadow-2xl p-8 border border-white/20 dark:border-gray-700/30 glow">

            <!-- Animated Logo/Icon -->
            <div class="text-center mb-8">
                <div class="relative inline-block">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 pulse">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                    </div>
                    <div class="absolute -top-1 -right-1 w-6 h-6 bg-green-400 rounded-full border-2 border-white">
                        <svg class="w-4 h-4 text-white mx-auto mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
                <h2
                    class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">
                    Welcome Back
                </h2>
                <p class="text-gray-600 dark:text-gray-300 text-sm">
                    Enter your email or mobile to receive OTP
                </p>
            </div>

            <!-- Messages with animation -->
            {% if messages %}
            <div class="mb-4 space-y-2">
                {% for message in messages %}
                <div
                    class="p-3 rounded-lg {% if message.tags == 'error' %}bg-red-100 text-red-700 border border-red-200{% else %}bg-green-100 text-green-700 border border-green-200{% endif %} transform transition-all duration-300 hover:scale-[1.02]">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 {% if message.tags == 'error' %}text-red-600{% else %}text-green-600{% endif %}"
                            fill="currentColor" viewBox="0 0 20 20">
                            {% if message.tags == 'error' %}
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                                clip-rule="evenodd" />
                            {% else %}
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                clip-rule="evenodd" />
                            {% endif %}
                        </svg>
                        {{ message }}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Login Form -->
            <form method="post" class="space-y-6">
                {% csrf_token %}

                <!-- Email/Mobile Input -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        <span class="flex items-center">
                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M14.243 5.757a6 6 0 10-.986 9.284 1 1 0 111.087 1.678A8 8 0 1118 10a3 3 0 01-4.8 2.401A4 4 0 1114 10a1 1 0 102 0c0-1.537-.586-3.07-1.757-4.243zM12 10a2 2 0 10-4 0 2 2 0 004 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            Email or Mobile Number
                        </span>
                    </label>
                    <div class="relative group">
                        <input type="text" name="user_input" placeholder="Enter your email or mobile number"
                            class="w-full border-2 border-gray-300 dark:border-gray-600 rounded-xl p-4 pl-12 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700/50 dark:text-white transition-all duration-300 group-hover:border-blue-400 transform group-hover:scale-[1.01]"
                            required>
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-500 transition-colors" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit"
                    class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg hover:shadow-xl group relative overflow-hidden">
                    <span class="relative z-10 flex items-center justify-center">
                        Send OTP
                        <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 7l5 5m0 0l-5 5m5-5H6" />
                        </svg>
                    </span>
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-blue-700 to-purple-700 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300">
                    </div>
                </button>
            </form>

            <!-- Signup Link -->
            <div class="text-center mt-8 pt-6 border-t border-gray-200/50 dark:border-gray-700/50">
                <p class="text-gray-600 dark:text-gray-300 text-sm">
                    New here?
                    <a href="{% url 'signup' %}"
                        class="text-blue-600 hover:text-blue-500 font-medium transition-all duration-300 hover:underline inline-flex items-center group">
                        Create Account
                        <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for Particle Animation -->
<script>
    // Particle animation for Option 4
    const canvas = document.getElementById('particles-canvas');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        const particleCount = window.innerWidth < 768 ? 30 : 60;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 1;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
                this.color = `rgba(${Math.random() * 100 + 100}, ${Math.random() * 100 + 150}, 255, 0.5)`;
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.x > canvas.width) this.x = 0;
                else if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                else if (this.y < 0) this.y = canvas.height;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let particle of particles) {
                particle.update();
                particle.draw();
            }
            requestAnimationFrame(animateParticles);
        }

        initParticles();
        animateParticles();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initParticles();
        });
    }

    // Input focus effect
    document.addEventListener('DOMContentLoaded', function () {
        const input = document.querySelector('input[name="user_input"]');
        const form = document.querySelector('.animated-form');

        if (input) {
            input.addEventListener('focus', function () {
                this.parentElement.classList.add('ring-2', 'ring-blue-300');
            });

            input.addEventListener('blur', function () {
                this.parentElement.classList.remove('ring-2', 'ring-blue-300');
            });
        }

        // Add subtle animation to form
        if (form) {
            setTimeout(() => {
                form.style.opacity = '1';
                form.style.transform = 'translateY(0)';
            }, 100);
        }
    });
</script>

{% endblock %}